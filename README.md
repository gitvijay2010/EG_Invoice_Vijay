# Invoice Task Documentation

## Table of Contents

- [Installation](#installation)
- [Environment Configuration](#environment-configuration)
- [Running the Application](#running-the-application)
- [Backend Use Cases](#backend-use-cases)
  - [Admin Panel](#admin-panel)
  - [API Endpoints](#api-endpoints)
- [License](#license)

## Installation

1. **Clone the repository:**
    ```bash
    git clone https://github.com/yourusername/yourproject.git
    cd yourproject
    ```
2. **Install Composer dependencies:**
    ```bash
    composer install
    ```
3. **Install NPM dependencies:**
    ```bash
    npm install
    ```
4. **Generate the application key:**
    ```bash
    php artisan key:generate
    ```
5. **Create MYSQL databases:**
    - In `.env` and `.env.testing`
6. **Migrate the database:**
    ```bash
    php artisan migrate
    ```
7. **Seed the database (optional):**
    ```bash
    php artisan db:seed
    ```
8. **Serve the application:**
    ```bash
    php artisan serve
    ```
    The application will be available at [http://127.0.0.1:8000](http://127.0.0.1:8000).
9. **Credentials:**
    - Email: `admin@admin.com`
    - Password: `password`

## Environment Configuration

Make sure the following environment variables are correctly configured in your `.env` file:

- `DB_CONNECTION`: Set to `mysql`
- `DB_HOST`: Set to your database host.
- `DB_PORT`: Set to `3306` (default for MySQL).
- `DB_DATABASE`: Set to your database name.
- `DB_USERNAME`: Set to your database username.
- `DB_PASSWORD`: Set to your database password.
- `APP_KEY`: Ensure that the application key is set (generated by `php artisan key:generate`).

## Running the Application

After setting up the project and configuring the environment, you can run the application on the local server by running the following command:

```bash
php artisan serve
```

## Backend Use Cases

## Admin Panel

1. **Login as Admin:** Navigate to the admin login page [http://127.0.0.1:8000/admin/enter](http://127.0.0.1:8000/admin/enter) and provide valid credentials. After logging in, the admin has access to manage products, categories, and users.
2. **Manage Products:** Admin can view, create, update, and delete products. The products are displayed with their details such as name, price, and quantity.
3. **Manage Categories:** Admin can create, update, and delete product categories.
4. **Manage Users:** Admin can view and manage users.

## API Endpoints

### Login

**Endpoint:** `POST /api/login`

```json
{
  "email": "user@example.com",
  "password": "password"
}
```
**Response:**

```json
{
  "token": "JWT-TOKEN"
}
```
Add Authorization: Bearer your_generated_token_here for all other requests with the token received in the header request
Cart.

**Add Item to Cart:** POST /api/cart

```json
{
  "product_id": 1,
  "quantity": 1
}
```
Response:

```json
{
  "message": "Item added to cart successfully",
  "cart_item": {
    "user_id": 1,
    "product_id": 2,
    "quantity": 1,
    "price": "105.44",
    "sub_total": "55.44",
    "discount": "50.00",
    "coupon_id": 2,
    "tax": "3.88",
    "status": 0,
    "updated_at": "2024-11-22T08:03:59.000000Z",
    "created_at": "2024-11-22T08:03:59.000000Z",
    "id": 3
  },
  "finalTotal": "9.32"
}
```
**Checkout Endpoint:** POST /api/checkout

Response:

```json
{
  "subtotal": "938.86",
  "discount": "133.34",
  "tax": "56.39",
  "finalTotal": "861.91"
}
```
**PayNow Endpoint:** POST /api/paynow

```json
{
  "payment_type": "credit"
}
```
Response:

```json
{
  "message": "Order created and payment processed successfully",
  "order": {
    "user_id": 1,
    "subtotal": 105.43,
    "discount": 50,
    "tax": 3.87,
    "total": 59.32,
    "updated_at": "2024-11-22T08:04:22.000000Z",
    "created_at": "2024-11-22T08:04:22.000000Z",
    "id": 2
  }
}
```
## Orders
**Get Orders:** GET /api/orders

Response:

```json
{
  "orders": [
    {
      "id": 1,
      "user_id": 1,
      "subtotal": "938.86",
      "discount": "133.34",
      "tax": "56.39",
      "total": "861.91",
      "payment_type": null,
      "created_at": "2024-11-22T07:03:23.000000Z",
      "updated_at": "2024-11-22T07:03:23.000000Z",
      "order_items": [
        {
          "id": 1,
          "order_id": 1,
          "product_id": 1,
          "quantity": 2,
          "price": "416.71",
          "subtotal": "750.08",
          "tax": "52.51",
          "discount": "0.00",
          "created_at": "2024-11-22T07:03:23.000000Z",
          "updated_at": "2024-11-22T07:03:23.000000Z"
        },
        {
          "id": 2,
          "order_id": 1,
          "product_id": 2,
          "quantity": 1,
          "price": "105.44",
          "subtotal": "55.44",
          "tax": "3.88",
          "discount": "0.00",
          "created_at": "2024-11-22T07:03:23.000000Z",
          "updated_at": "2024-11-22T07:03:23.000000Z"
        }
      ]
    },
    {
      "id": 2,
      "user_id": 1,
      "subtotal": "105.44",
      "discount": "50.00",
      "tax": "3.88",
      "total": "59.32",
      "payment_type": null,
      "created_at": "2024-11-22T08:04:22.000000Z",
      "updated_at": "2024-11-22T08:04:22.000000Z",
      "order_items": [
        {
          "id": 3,
          "order_id": 2,
          "product_id": 2,
          "quantity": 1,
          "price": "105.44",
          "subtotal": "55.44",
          "tax": "3.88",
          "discount": "0.00",
          "created_at": "2024-11-22T08:04:22.000000Z",
          "updated_at": "2024-11-22T08:04:22.000000Z"
        }
      ]
    }
  ]
}
```
**Invoice Generate Invoice:** GET /api/invoice/{order_id}

Response:

```json
{
  "message": "Invoice generated successfully",
  "invoice": {
    "order_id": 2,
    "customer": {
      "name": "Dr. Aniyah Moore III",
      "email": "wolf.porter@example.com"
    },
    "products": [
      {
        "product_name": "voluptas",
        "quantity": 1,
        "unit_price": "105.44",
        "subtotal": "55.44"
      }
    ],
    "subtotal": "55.44",
    "discounts": [
      {
        "code": "FLAT50",
        "type": "flat",
        "discount_value": "50.00",
        "applied_discount": "50.00"
      }
    ],
    "applied_discount": "50.00",
    "tax": "0.38",
    "total": "5.82"
  }
}
```

## Test Cases
```bash
php artisan test
```
License
This project is licensed under the MIT License - see the LICENSE file for details.


This document now includes the **Backend Use Cases** with all the specified API endpoints, r
