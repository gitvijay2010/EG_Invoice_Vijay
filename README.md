<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Documentation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
        }
        header {
            background-color: #333;
            color: white;
            padding: 10px 0;
            text-align: center;
        }
        main {
            padding: 20px;
        }
        h1, h2, h3 {
            color: #333;
        }
        h1 {
            border-bottom: 2px solid #ccc;
            padding-bottom: 10px;
        }
        ul {
            list-style-type: none;
            padding-left: 0;
        }
        li {
            margin: 5px 0;
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 6px;
            font-family: monospace;
        }
        pre {
            background-color: #f4f4f4;
            padding: 10px;
            border: 1px solid #ddd;
            font-family: monospace;
        }
        .container {
            width: 80%;
            margin: 0 auto;
            background-color: white;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }
    </style>
</head>
<body>

<header>
    <h1>Invoice Task Documentation</h1>
</header>

<main class="container">
    <h2>Table of Contents</h2>
    <ul>
        <li><a href="#installation">Installation</a></li>
        <li><a href="#environment-configuration">Environment Configuration</a></li>
        <li><a href="#running-the-application">Running the Application</a></li>
        <li><a href="#backend-use-cases">Backend Use Cases</a></li>
        <li><a href="#admin-panel">Admin Panel</a></li>
        <li><a href="#api-endpoints">API Endpoints</a></li>
    </ul>

    <h2 id="installation">Installation</h2>
    <ol>
        <li><strong>Clone the repository:</strong>
            <pre><code>git clone https://github.com/yourusername/yourproject.git
cd yourproject</code></pre>
        </li>
        <li><strong>Install Composer dependencies:</strong>
            <pre><code>composer install</code></pre>
        </li>
        <li><strong>Install NPM dependencies:</strong>
            <pre><code>npm install</code></pre>
        </li>
        <li><strong>Generate the application key:</strong>
            <pre><code>php artisan key:generate</code></pre>
        </li>
        <li><strong>Create MYSQL databases:</strong>
            <pre><code>.env and in .env.testing</code></pre>
        </li>
        <li><strong>Migrate the database:</strong>
            <pre><code>php artisan migrate</code></pre>
        </li>
        <li><strong>Seed the database (optional):</strong>
            <pre><code>php artisan db:seed</code></pre>
        </li>
        <li><strong>Serve the application:</strong>
            <pre><code>php artisan serve</code></pre>
            The application will be available at <code><a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a></code>.
        </li>
        <li><strong>Credentials:</strong>
            <pre><code>Email : admin@admin.com <br>Password : password</code></pre>
        </li>
    </ol>

    <h2 id="environment-configuration">Environment Configuration</h2>
    <p>Make sure the following environment variables are correctly configured in your <code>.env</code> file:</p>
    <ul>
        <li><code>DB_CONNECTION</code>: Set to <code>mysql</code></li>
        <li><code>DB_HOST</code>: Set to your database host.</li>
        <li><code>DB_PORT</code>: Set to <code>3306</code> (default for MySQL).</li>
        <li><code>DB_DATABASE</code>: Set to your database name.</li>
        <li><code>DB_USERNAME</code>: Set to your database username.</li>
        <li><code>DB_PASSWORD</code>: Set to your database password.</li>
        <li><code>APP_KEY</code>: Ensure that the application key is set (generated by <code>php artisan key:generate</code>).</li>
    </ul>

    <h2 id="running-the-application">Running the Application</h2>
    <p>After setting up the project and configuring the environment, you can run the application on the local server by running the following command:</p>
    <pre><code>php artisan serve</code></pre>
    <p>The app should now be accessible at <code><a href="http://127.0.0.1:8000">http://127.0.0.1:8000</a></code>.</p>

    <h2 id="backend-use-cases">Backend Use Cases</h2>

    <h3 id="admin-panel">Admin Panel</h3>
    <ol>
        <li><strong>Login as Admin:</strong> Navigate to the admin login page (<code><a href="http://127.0.0.1:8000/admin/enter">http://127.0.0.1:8000/admin/enter</a></code>) and provide valid credentials. After logging in, the admin has access to manage products, categories, and users.</li>
        <li><strong>Manage Products:</strong> Admin can view, create, update, and delete products. The products are displayed with their details such as name, price, and quantity.</li>
        <li><strong>Manage Categories:</strong> Admin can create, update, and delete product categories.</li>
        <li><strong>Manage Users:</strong> Admin can view and manage users.</li>
    </ol>

    <h3 id="api-endpoints">API Endpoints</h3>
    <h4>Login</h4>
    <p><strong>Endpoint:</strong> <code>POST /api/login</code></p>
    <pre><code>{
    "email": "user@example.com",
    "password": "password"
}</code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>{
    "token": "JWT-TOKEN"
}</code></pre>

    <h2>Add <u>Authorization: Bearer your_generated_token_here</u> for all other requests with the token received in the header request</h2>
    <h4>Cart</h4>
    <p><strong>Add Item to Cart:</strong> <code>POST /api/cart</code></p>
    <pre><code>{
    "product_id": 1,
    "quantity": 1
}</code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>{
    "message": "Item added to cart successfully",
    "cart_item": {
        "user_id": 1,
        "product_id": 2,
        "quantity": 1,
        "price": "105.44",
        "sub_total": "55.44",
        "discount": "50.00",
        "coupon_id": 2,
        "tax": "3.88",
        "status": 0,
        "updated_at": "2024-11-22T08:03:59.000000Z",
        "created_at": "2024-11-22T08:03:59.000000Z",
        "id": 3
    },
    "finalTotal": "9.32"
}</code></pre>

    <h4>Checkout</h4>
    <p><strong>Endpoint:</strong> <code>POST /api/checkout</code></p>
    <pre><code></code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>{
    "subtotal": "938.86",
    "discount": "133.34",
    "tax": "56.39",
    "finalTotal": "861.91"
    }</code></pre>

    <h4>PayNow</h4>
    <p><strong>Endpoint:</strong> <code>POST /api/paynow</code></p>
    <pre><code>{
    "payment_type": "credit"
}</code></pre>
    <p><strong>Response:</strong></p>
    <pre><code>{
    "message": "Order created and payment processed successfully",
    "order": {
        "user_id": 1,
        "subtotal": 105.43,
        "discount": 50,
        "tax": 3.87,
        "total": 59.32,
        "updated_at": "2024-11-22T08:04:22.000000Z",
        "created_at": "2024-11-22T08:04:22.000000Z",
        "id": 2
    }
}</code></pre>

    <h4>Orders</h4>
    <p><strong>Get Order Details:</strong> <code>GET /api/orders</code></p>
    <p><strong>Response:</strong></p>
    <pre><code>{
    "orders": [
        {
            "id": 1,
            "user_id": 1,
            "subtotal": "938.86",
            "discount": "133.34",
            "tax": "56.39",
            "total": "861.91",
            "payment_type": null,
            "created_at": "2024-11-22T07:03:23.000000Z",
            "updated_at": "2024-11-22T07:03:23.000000Z",
            "order_items": [
                {
                    "id": 1,
                    "order_id": 1,
                    "product_id": 1,
                    "quantity": 2,
                    "price": "416.71",
                    "subtotal": "750.08",
                    "tax": "52.51",
                    "discount": "0.00",
                    "created_at": "2024-11-22T07:03:23.000000Z",
                    "updated_at": "2024-11-22T07:03:23.000000Z"
                },
                {
                    "id": 2,
                    "order_id": 1,
                    "product_id": 2,
                    "quantity": 1,
                    "price": "105.44",
                    "subtotal": "55.44",
                    "tax": "3.88",
                    "discount": "0.00",
                    "created_at": "2024-11-22T07:03:23.000000Z",
                    "updated_at": "2024-11-22T07:03:23.000000Z"
                }
            ]
        },
        {
            "id": 2,
            "user_id": 1,
            "subtotal": "105.44",
            "discount": "50.00",
            "tax": "3.88",
            "total": "59.32",
            "payment_type": null,
            "created_at": "2024-11-22T08:04:22.000000Z",
            "updated_at": "2024-11-22T08:04:22.000000Z",
            "order_items": [
                {
                    "id": 3,
                    "order_id": 2,
                    "product_id": 2,
                    "quantity": 1,
                    "price": "105.44",
                    "subtotal": "55.44",
                    "tax": "3.88",
                    "discount": "0.00",
                    "created_at": "2024-11-22T08:04:22.000000Z",
                    "updated_at": "2024-11-22T08:04:22.000000Z"
                }
            ]
        }
    ]
}</code></pre>

    <h4>Invoice</h4>
    <p><strong>Generate Invoice:</strong> <code>GET /api/invoice/{order_id}</code></p>
    <pre><code>{
    "message": "Invoice generated successfully",
    "invoice": {
        "order_id": 2,
        "customer": {
            "name": "Dr. Aniyah Moore III",
            "email": "wolf.porter@example.com"
        },
        "products": [
            {
                "product_name": "voluptas",
                "quantity": 1,
                "unit_price": "105.44",
                "subtotal": "55.44"
            }
        ],
        "subtotal": "55.44",
        "discounts": [
            {
                "code": "FLAT50",
                "type": "flat",
                "discount_value": "50.00",
                "applied_discount": "50.00"
            }
        ],
        "applied_discount": "50.00",
        "tax": "0.38",
        "total": "5.82"
    }
}</code></pre>
    <h4>Test cases</h4>
    <p><code>php artisan test</code></p>
    <p>&nbsp;</p>

    <h2>License</h2>
    <p>This project is licensed under the MIT License - see the LICENSE file for details.</p>
</main>

</body>
</html>
